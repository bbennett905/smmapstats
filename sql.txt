CREATE TABLE IF NOT EXISTS `mapstats_servers` (
  server_id INT NOT NULL AUTO_INCREMENT, 
  server_name VARCHAR(64), 
  ip VARCHAR(16) NOT NULL,
  PRIMARY KEY (server_id)
);
CREATE TABLE IF NOT EXISTS `mapstats_data` (
  data_id INT NOT NULL AUTO_INCREMENT, 
  server_id INT NOT NULL,
  map_name VARCHAR(64) NOT NULL,
  data_interval INT NOT NULL,
  player_count INT NOT NULL,
  PRIMARY KEY (data_id),
  FOREIGN KEY (server_id) REFERENCES mapstats_servers(server_id)
);

INSERT INTO `mapstats_servers`
  (server_name, ip) VALUES
  ('sample server name', '127.0.0.1');
UPDATE `mapstats_servers`
  SET server_name = 'new server name'
  WHERE ip = '127.0.0.1';
INSERT INTO `mapstats_data`
  (server_id, map_name, data_interval, player_count) VALUES
  (
    (SELECT server_id FROM `mapstats_servers` WHERE ip = '127.0.0.1'),
    'jb_summer_jail_v1',
    15,
    6
   );
  
 